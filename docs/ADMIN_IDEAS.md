# Идеи для администратора

Что уже есть и что можно добавить/улучшить в админ-панели и в работе ролей **SUP (SUPPORT)**, **ADMIN** и **ADM**.

---

## Что уже есть

- **Пользователи:** список, поиск, фильтр по роли и статусу, сортировка, пагинация; вкладка «Истекают» (VOL с истекающим доступом).
- **Действия:** приглашение по ссылке, смена роли, блокировка/разблокировка с причиной, продление VOL (по одному и массово), сброс пароля, ограничения (adminPanel и др.), удаление пользователя (на карточке).
- **Карточка пользователя:** активность, заметки, пространства, продление VOL, смена роли, блокировка, проверка подключения к пространству.
- **Настройки системы (только ADMIN):** «Отправить от имени» для SUP/ADM, просмотр активности VOL для SUP, включение/выключение вкладок пространства (шаблоны, эмодзи, добавление пользователей).
- **Журнал аудита (SUP/ADMIN):** лог действий (блокировка, смена ролей, создание пользователей, архивация и т.д.) с пагинацией.
- **Назначение на пространство:** SUP/SUPER назначает ADM (или SUP) на пространство; назначенный видит пространство с пометкой «Назначено» и может отказаться.

---

## Пользователи (список и карточка)

### Список пользователей
- **Экспорт в CSV/Excel** — кнопка «Скачать список»: email, имя, роль, статус (активен/заблокирован), дата регистрации, последний вход, срок доступа (для VOL). Фильтры и поиск применяются к экспорту.
- **Массовые действия** — кроме массового продления VOL: массовая разблокировка, массовая смена роли (например, несколько VOL → USER), массовое продление на выбранный период с выбором даты.
- **Сохранение фильтров в URL** — `?role=VOL&status=active&search=...`, чтобы можно было сохранить ссылку или поделиться ею.
- **Быстрые фильтры** — кнопки-чипы: «Все», «VOL», «Истекают в течение 7 дней», «Заблокированные», «Админы (SUP/ADM/ADMIN)».
- **Сортировка по столбцам** — клик по заголовку «Email», «Роль», «Последний вход», «Создан» переключает сортировку и направление (по возрастанию/убыванию).
- **Подсказки (тултипы)** — у иконок действий (троеточие, блокировка, смена роли и т.д.) единообразные подсказки; у бейджей ролей — краткое описание роли.

### Карточка пользователя (/dashboard/admin/users/[id])
- **История смены ролей** — кто и когда менял роль пользователю (если пишется в аудит или отдельная таблица).
- **История блокировок** — список блокировок/разблокировок с датой и причиной (и кто выполнил).
- **Ссылки на связанные сущности** — из активности кликабельные ссылки: «Перейти к пространству», «Перейти к сообщению», «Открыть в календаре».
- **Быстрое продление** — поле «Продлить до» с datepicker и кнопка «Продлить», без обязательного открытия полного диалога.
- **Заметки с тегами** — теги для заметок (например, «проблемы с доступом», «продлён вручную») и фильтр по тегам.
- **Дублирование приглашения** — кнопка «Создать новую ссылку-приглашение» (если старая истекла или потеряна), с копированием в буфер и тостом.

---

## Журнал аудита

- **Фильтры** — по типу действия (блокировка, смена роли, создание пользователя, архивация и т.д.), по пользователю (кто выполнил), по целевой сущности (над кем/чем действие), по периоду (дата от — до).
- **Экспорт** — кнопка «Скачать журнал» (CSV/JSON) с учётом текущих фильтров и пагинации или лимита (например, последние 1000 записей).
- **Детали по клику** — раскрытие строки или модалка с полным JSON/описанием события (старая/новая роль, причина блокировки, id пространства и т.д.).
- **Поиск по тексту** — по полю «детали» или по имени пользователя (кто выполнил / над кем).
- **Ссылки в списке** — в каждой строке ссылки «К пользователю», «К пространству» (если применимо), чтобы быстро перейти в карточку.

---

## Пространства с точки зрения админа

- **Сводка по пространствам** — на главной админки или отдельная вкладка: количество активных/архивных пространств, пространства без владельца (если бывает), пространства с ошибкой подключения (если есть статус).
- **Переход к пространству** — из карточки пользователя в блоке «Пространства» клик по названию ведёт на `/dashboard/workspaces/[id]`; для назначенных — пометка «Назначено».
- **Назначение ADM/SUP** — уже есть блок «Назначенные администраторы» на странице пространства; можно добавить тултипы к кнопкам «Назначить»/«Снять» и краткую подсказку, кто может назначать (SUP — только ADM, SUPER — ADM и SUP).
- **Быстрая архивация из админки** — в списке пользователей или в карточке: ссылка «Пространства пользователя» с возможностью перейти и архивировать пространство в один клик (если нужно часто).

---

## Настройки системы (ADMIN)

- **Аудит изменений настроек** — записывать в журнал аудита включение/выключение опций (кто и когда изменил sendAsEnabledSup, activityViewVolSup и т.д.).
- **Описание каждой опции** — под каждой галочкой короткий текст «Что произойдёт, если включить/выключить» и для кого это действует (SUP, ADM, VOL).
- **Группировка** — блоки «Отправка сообщений», «Видимость активности», «Вкладки пространства» с заголовками и разделителями.
- **Предпросмотр прав** — опционально: «Как видит интерфейс ADM при таких настройках» (краткий чек-лист или ссылка на документацию).

---

## Отчёты и аналитика (по желанию)

- **Сводка за период** — на главной админки: количество новых пользователей, заблокированных, продлений VOL, созданных пространств, отправленных сообщений за выбранный период (день/неделя/месяц).
- **Графики** — простые графики: регистрации по дням, активность (логины/действия) по дням, количество сообщений по пространствам.
- **Экспорт отчёта** — одна кнопка «Скачать отчёт за месяц»: PDF или CSV с основными метриками (пользователи, пространства, сообщения, блокировки).

---

## Безопасность и сессии

- **Активные сессии** — в настройках (или отдельная страница для ADMIN): список устройств/сессий с датой последней активности; кнопка «Выйти на всех устройствах кроме текущего» или «Завершить сессию» для выбранной.
- **Подтверждение опасных действий** — везде, где уже есть AlertDialog (блокировка, смена роли на SUPPORT, удаление пользователя), добавить краткий итог: «Пользователь X будет заблокирован. Он не сможет войти до разблокировки.»

---

## Роль ADM (ограниченный администратор)

- **Чёткое разграничение в UI** — ADM не видит блоки «Настройки системы», «Журнал аудита», «Ограничения (restrictions)», «Смена роли на SUP/ADMIN»; видит только список пользователей и карточки, с действиями только для VOL (продление, блокировка, смена роли VOL ↔ USER).
- **Подсказка на главной админки** — текст вида «Вы вошли как ADM. Доступны только просмотр пользователей и управление волонтёрами.»
- **Фильтр «Мои пространства + назначенные»** — на странице пространств у ADM уже показываются свои и назначенные; в админке при просмотре пользователя показывать, назначен ли этот пользователь на какие-то пространства (и на какие), если это не нарушает конфиденциальность.
- **Массовое продление только для VOL** — при массовом выборе ADM может продлевать только пользователей с ролью VOL; остальные в списке не выбираются или кнопка «Продлить» неактивна.

---

## UX/UI админ-панели

- **Скелетоны** — при загрузке списка пользователей и журнала аудита показывать скелетон таблицы/списка в едином стиле с остальным приложением.
- **Пустые состояния** — «Нет пользователей по выбранным фильтрам» с кнопкой «Сбросить фильтры»; «В журнале пока нет записей» с кратким объяснением, какие действия пишутся в журнал.
- **Тосты с действием** — при ошибке загрузки пользователей или аудита тост с кнопкой «Повторить»; при успешном массовом продлении — «Продлено N пользователей» с возможностью «Отменить» (если будет откат).
- **Клавиатура** — Escape закрывает модалки и диалоги; при открытом диалоге смены роли Enter подтверждает (если фокус не в поле ввода).
- **Мобильная версия** — таблицу пользователей на узких экранах показывать карточками (как на странице пространств) или горизонтальный скролл с закреплённым первым столбцом; действия — в выпадающем меню или нижнем листе.

---

## Приоритизация (условно)

**Быстро и полезно:** экспорт списка пользователей в CSV, фильтры и экспорт журнала аудита, тултипы на кнопках действий, скелетоны и пустые состояния в админке, сохранение фильтров списка пользователей в URL.

**Средний объём:** массовые действия (кроме продления), детализация в карточке пользователя (история ролей/блокировок), описание настроек системы и аудит их изменений, активные сессии в настройках.

**По желанию:** сводки и графики за период, экспорт отчёта за месяц, теги у заметок, «предпросмотр прав» для настроек.
